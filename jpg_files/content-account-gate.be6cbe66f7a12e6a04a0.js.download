(()=>{var e={86544:(e,t,n)=>{"use strict";let i;n.d(t,{Z:()=>o});const o=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload},n=new FormData;for(let[e,i]of Object.entries(t))i&&n.append(e,i);(i=i||new Promise(((e,t)=>{const n=document.querySelector('meta[name="csrf-token"]');if(n)return e(n.getAttribute("content"));fetch("/csrf_token",{credentials:"same-origin",method:"GET"}).then((e=>{if(e.ok)return e.json();t(`http error: ${e.status}`)})).then((t=>e(t.csrf_token)))})),i).then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:n}).then((e=>e.json())).then((e=>{const t=document.createElement("form");t.setAttribute("action",e.url),t.setAttribute("method","POST");for(let[n,i]of Object.entries(e.params)){const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",n),e.value=i,t.appendChild(e)}document.body.appendChild(t),t.submit()}))))}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"37c936e1e1372ce68eec27a8653bcebac06d7e55"},(()=>{"use strict";var e=n(86544);const t="contentAccountGateData",i=e=>Array.isArray(e)?e.filter((e=>{return!(!(i=e.id)||"string"!=typeof i||(t=e.accessedDateTime,!t||!/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(n=t)||new Date(n).toISOString()!==n));var t,n,i})):[],o=e=>JSON.parse(window.localStorage.getItem(`${t}_${e}`)),s=(e,t)=>{const n=window.slideshare_object.slideshow,i={slideshow_id:n.id,slideshow_created_at:n.created_at,slideshow_category:window.slideshare_object.gam_cat_name,slideshow_language:n.language,slideshow_format:n.type,source:t};"undefined"!=typeof amplitude&&amplitude.getInstance().logEvent(e,i)};window.addEventListener("DOMContentLoaded",(()=>{const n=window.slideshare_object,r=n&&n.slideshow,a=r.type,d=r.total_slides,c=n.utils.isUserAuthenticated(),l=window.ab_tests.viewRestrictionWithoutAccount;let u=!1;if(window.feature_flags.viewRestrictionsWithoutAccount&&!c&&("presentation"===a||"document"===a)&&d>1){const a=5,d=(({slideshowId:e,allowedContentCount:t,viewRestrictionAbTestValue:n})=>{const r=i(o(n));if(r.length>0){const n=((e,t)=>{const n=(e=>{const t=Date.now();return new Date(t-864e5*e).toISOString()})(t);return e.filter((e=>e.accessedDateTime>n))})(r,30),i=((e,t)=>e.findIndex((e=>e.id===t))>-1)(n,e);return!i&&n.length<t?((e,t)=>(e.push({id:t,accessedDateTime:(new Date).toISOString()}),(e=>{const t=5===e;3===e?s("view_restriction_banner_shown"):t&&s("view_restriction_threshold_hit")})(e.length),e))(n,e):n}return[{id:e,accessedDateTime:(new Date).toISOString()}]})({slideshowId:r.id,allowedContentCount:a,viewRestrictionAbTestValue:l});((e,n)=>{window.localStorage.setItem(`${t}_${n}`,JSON.stringify(e))})(d,l);const c=d.length;if("show_view_restriction"===l){const t=2,{shouldShowBanner:i,remainingDocCount:o}=((e,t,n)=>({shouldShowBanner:e-t<=n,remainingDocCount:e-t}))(a,c,t);u=((e,t)=>e<=t)(a,c),((t,n,i)=>{if(t){const t=$(".limit-notification"),o=t.find("#notification-warning-text");o.empty(),o.append(((e,t)=>{const n=t.utils;return e<=0?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_ran_out_text"):1===e?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_last_document_text"):n.i18n("slideshow.foundation_slideview.limit_content_without_accoun.notification_banner_text",{count:e})})(n,i)),t.find("#notification-warning-link").on("click",(()=>{(t=>{const n=window.slideshare_object,i=n&&n.slideshow;s("click_view_restrict_blur_signup_cta",t),(0,e.Z)({from_source:i.ss_url,slideshow_id:i.id})})("banner")})),t.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400})}})(i,o,n),u&&$(".player").attr("data-shouldblurreader",u)}w=l,["control","show_view_restirction"].map((e=>{e!==w&&i(o(e)).length>0&&window.localStorage.removeItem(`${t}_${e}`)}))}var w}))})()})();
//# sourceMappingURL=content-account-gate.be6cbe66f7a12e6a04a0.js.map